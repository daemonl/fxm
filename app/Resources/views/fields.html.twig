{% extends 'form_div_layout.html.twig' %}
 
{% block field_errors %}
{% spaceless %}
    <span class="help-inline">
        {% if errors|length > 0 %}
            {% for error in errors %}
                {{ error.messageTemplate|trans(error.messageParameters, 'validators') }}<br />
            {% endfor %}
        {% endif %}
    </span>
{% endspaceless %}
{% endblock field_errors %}
 
{% block field_row %}
<div class="control-group {% if errors|length > 0 %}error{% endif %}">
 {% if attr.class is defined %}
            {% set cclass = attr.class %}
            {% else %}
              {% set cclass = '' %}
            {% endif %}
            {% if errors|length > 0 %}
                {% set cclass = 'error' %}
            {% endif %}
{% if label=="-" %}
  {{ form_widget(form, { 'attr': { 'class': cclass } }) }}
{% else %}

        {{ form_label(form, label, { 'attr': { 'class': 'control-label cl'}}) }}
        <div class="controls">
            {{ form_widget(form, { 'attr': attr }) }}
            {{ form_errors(form) }}
        </div>

{% endif %}
        </div>
{% endblock field_row %}

{% block generic_label %}
{% spaceless %}
    {% if required %}
        {% set attr = attr|merge({'class': attr.class|default('') ~ ' required'}) %}
    {% endif %}
<label{% for attrname,attrvalue in attr %} {{attrname}}="{{attrvalue}}"{% endfor %}>{{ label|trans }}{% if required %} *{% endif %}</label>
{% endspaceless %}
{% endblock %}
    


{% block datetime_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
        {% set type = "hidden" %}
        {{ block('field_widget') }}
    {% else %}
        <div {{ block('widget_container_attributes') }}>
          <div style="float: left;">
            {{ form_errors(form.date) }}
            {{ form_widget(form.date) }}
          </div>
          <div style="float: left;">
            {{ form_widget(form.time) }}
            {{ form_errors(form.time) }}
          </div>
        </div>
    {% endif %}
{% endspaceless %}
{% endblock datetime_widget %}


{% block date_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
      <div {{ block('widget_container_attributes') }} >
        {{ block('field_widget') }}
      </div>
    {% else %}
      <div {{ block('widget_container_attributes') }}>
        {{ form_widget(form.day, { 'attr': { 'class': 'span1' } }) }}&nbsp;    
        {{ form_widget(form.month, { 'attr': { 'class': 'span1' } }) }}&nbsp;
        {{ form_widget(form.year, { 'attr': { 'style': 'width: 80px;' } }) }}&nbsp;
      </div>
    {% endif %}
{% endspaceless %}
{% endblock date_widget %}

{% block time_widget %}
{% spaceless %}
    {% if widget == 'single_text' %}
      <div {{ block('widget_container_attributes') }} >
        {{ block('field_widget') }}
      </div>
    {% else %}
        <div {{ block('widget_container_attributes') }}>
            {{ form_widget(form.hour, { 'attr': { 'class': 'span1' } }) }}:{{ form_widget(form.minute, { 'attr': { 'class': 'span1' } }) }}{% if with_seconds %}:{{ form_widget(form.second, { 'attr': { 'size': '1' } }) }}{% endif %}
        </div>
    {% endif %}
{% endspaceless %}
{% endblock time_widget %}

{% block name_widget %}
{% spaceless %}
      <div {{ block('widget_container_attributes') }}>
        <div class="span1">
            {{ form_widget(form.title, { 'attr': { 'class': 'span1' } }) }}
            <div style='text-align: center'>Title</div>
        </div>
        <div class="span3">
          {{ form_widget(form.forename, { 'attr': { 'class': 'span3' } }) }}
            <div style='text-align: center'>Forename</div>
        </div>
        <div class="span3">
          {{ form_widget(form.surname, { 'attr': { 'class': 'span3' } }) }}
            <div style='text-align: center'>Surname</div>
        </div>
      </div>
{% endspaceless %}
{% endblock name_widget %}

{% block phone_widget %}
{% spaceless %}
      <div {{ block('widget_container_attributes') }}>
        <div class="span2">
            {{ form_widget(form.type, { 'attr': { 'class': 'span2' } }) }}
            <div style='text-align: center'>Type</div>
        </div>
        <div class="span3">
          {{ form_widget(form.number, { 'attr': { 'class': 'span3' } }) }}
            <div style='text-align: center'>Number</div>
        </div>
      </div>
{% endspaceless %}
{% endblock phone_widget %}

{% block address_widget %}
  {% spaceless %}
    <div {{ block('widget_container_attributes') }}>
      {{ form_widget(form.firstline, { 'attr': { 'class': 'span4' , 'style':'margin-bottom: 10px'} }) }}<br/>    
      {{ form_widget(form.secondline, { 'attr': { 'class': 'span4' , 'style':'margin-bottom: 10px'} }) }}<br/>
      <div class="clear"></div>
      <div class="span2">
          {{ form_widget(form.city, { 'attr': { 'class': 'span2' } }) }}
          <div style='text-align: center'>City</div>
      </div>
      <div class="span2">
          {{ form_widget(form.state, { 'attr': { 'class': 'span2' } }) }}
          <div style='text-align: center'>State</div>             
      </div>
      <div class="clear" style="height: 10px"></div>
      <div>          
        <div class="span2">
          {{ form_widget(form.postcode, { 'attr': { 'class': 'span2' } }) }}
          <div style='text-align: center'>Postcode</div>
        </div>
        <div class="span2">
          {{ form_widget(form.country, { 'attr': { 'class': 'span2' } }) }}
          <div style='text-align: center'>Country</div>
        </div>
      </div>
    </div>
  {% endspaceless %}
{% endblock address_widget %}

{% block hour_widget %}
{% spaceless %}
      <div {{ block('widget_container_attributes') }}>
        <div class="span2">{{ form_widget(form.day, { 'attr': { 'class': 'span2' } }) }}</div>
        <div class="span1" style="width: 10px; text-align: center;"> From </div>  
        <div class="span2">{{ form_widget(form.start, { 'attr': { 'class': 'span2' } }) }}</div>
        <div class="span1" style="width: 5px; text-align: center;"> to </div>   
        <div class="span2">{{ form_widget(form.stop, { 'attr': { 'class': 'span2' , 'style': 'margin-left: 5px'} }) }}</div>
      </div>
{% endspaceless %}
{% endblock hour_widget %}

{% block entity_widget %}
{% spaceless %}
{% if attr.magic is defined %}
  <div>
    <input autocomplete="off" type="text" id="magicEntity-{{id}}" startval="{{value}}" forID="{{id}}" entName="{{label}}" class="typeahead magicEntity" data-provide="typeahead" data-items="5" 
           data-source='[{% for choice, label in choices %}"{{label}}"{% if not loop.last %},{% endif %}{% endfor %}]' />
    <input type="hidden" {{ block('widget_attributes') }} value="{{value}}" />
    <div class="MagicEntityStatus" id="magicEntityStatus-{{id}}">&nbsp;&nbsp;<div class='btn btn-green NewEntity message' style="display: none;" forID='{{id}}'>Add</div>&nbsp;{% if errors|length > 0 %}<i class="icon-remove"></i>{%else%}<i class="icon-ok"></i>{% endif %}&nbsp;<span class="message" style="display: none;">{{label}} does not exist.</span></div>
    
    <script type="text/javascript">
      var ItemsFor = Array();
      ItemsFor['{{id}}'] = Array();
      {% for choice, label in choices %}
      ItemsFor['{{id}}'][{{choice}}] = "{{label}}";
      {% endfor %}
    </script>
  </div>
{% else %}
 {% if expanded %}
        <div {{ block('widget_container_attributes') }}>
        {% for child in form %}
            {{ form_widget(child) }}
            {{ form_label(child) }}
        {% endfor %}
        </div>
    {% else %}
    <select {{ block('widget_attributes') }}{% if multiple %} multiple="multiple"{% endif %}>
        {% if empty_value is not none %}
            <option value="">{{ empty_value|trans }}</option>
        {% endif %}
        {% if preferred_choices|length > 0 %}
            {% set options = preferred_choices %}
            {{ block('widget_choice_options') }}
            {% if choices|length > 0 and separator is not none %}
                <option disabled="disabled">{{ separator }}</option>
            {% endif %}
        {% endif %}
        {% set options = choices %}
        {{ block('widget_choice_options') }}
    </select>
    {% endif %}
{% endif %}
{% endspaceless %}
{% endblock entity_widget %}

{% block collection_widget %}
{% spaceless %}
    <div class="formCollection">
        {% if prototype is defined %}
            {% set attr = attr|merge({'data-prototype': block('collection_item_widget') }) %}
        {% endif %}
        <div {{ block('widget_container_attributes') }}>
            {{ form_errors(form) }}
                <ul class="formCollection-ul">
        {% for rows in form %}
                <li>
                    <div class="fancy-info-box">
                  <div style="float:right; height: 0;z-index: 1;position: relative;">
                      <a class="formCollection-remove" title="Remove" href="#">
                        <span><i class="icon-remove"></i></span>

                      </a>
                  </div>
                  {{ form_widget(rows, { 'attr': { 'style': 'float: left;' } }) }}

                  <div class="clear"></div>
                  </div>
                </li>
            {% endfor %}
            </ul>
            {{ form_rest(form) }}
        </div>
        <div class="clear"></div>
        <div>
          <a class="formCollection-add" collectionId="{{ id }}" title="Add" href="#bottom">
            <div style="display: none;"></div>
            <span>Add New</span>
          </a>
        </div>
    </div>
    <div class="clear"></div>
{% endspaceless %}
{% endblock collection_widget %}

{% block collection_item_widget %}
{% spaceless %}
    <li>
    <div class="fancy-info-box" style="margin-top:10px;">     
       <div style="float: right">
         <a class="formCollection-remove" title="Remove" href="#"><span><i class="icon-remove"></i></span></a>
       </div>
      {{ form_widget(prototype, { 'attr': { 'style': 'float: left;' } }) }}
       <div class="clear"></div>
    </div>
    </li>
{% endspaceless %}
{% endblock collection_item_widget %}

    
{% block money_widget %}
{% spaceless %}
    <div class="input-append input-prepend">
      <span class="add-on">
        {{ money_pattern|replace({ '{{ widget }}': '</span>'~block('field_widget')~'<span class="add-on">' })|raw }}
      </span>    
    </div>
{% endspaceless %}
{% endblock money_widget %}
    
    
{% block HiddenTimestamp_widget %}
{% spaceless %}
    {{ block('field_widget') }}
{% endspaceless %}
{% endblock %}
    